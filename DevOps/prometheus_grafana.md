# Prometheus, Grafana

모니터링 툴 프로메테우스와 그라파나에 대해서 알아보겠다.

### Prometheus

프로메테우스는 대상 시스템으로부터 각종 모니터링 지표를 수집하고 저장하고 검색할 수 있는 시스템이다.

그라파나를 통해서 시각화를 지원할 수 있다.

많은 시스템을 모니터링 할 수 있는 다양한 플러그인이 지원되고 쿠버네티스 메인 모니터링 시스템으로 많이 사용이 된다.

프로메테우스가 주기적으로 exporter(모니터링 대상 시스템)로 부터 pulling 방식으로 메트릭을 읽어 수집한다.

풀링 방식을 이용하기 때문에 클라이언트가 필요할 때 데이터를 가져오기 때문에 최신 데이터를 얻을 수 있으며 불필요한 데이터를 가지고오지 않기 때문에 자원의 효율석을 높일 수 있고 요청을 보내기전 인증 인가 등의 작업을 거치기 때문에 보안성도 높인다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FyVDU6%2FbtrazuxWNw5%2FTsCiXAkBZm9sfZW6AYXQK1%2Fimg.png)

<br>

### Grafana

그라파나는 프로메테우스를 비롯한 여러 데이터들을 시각화 해주는 모니터링 툴이고 대표적으로 프로메테우스, InfluxDB와 같은 데이터 지표에서 제공되는 메트릭을 시각화 한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FAMbQ0%2Fbtrax6RUsJQ%2FWmGyOAdU0tEZTp7n73OGxk%2Fimg.png)

### Kibana와 차이

ELK 스택에 Kibana와 차이를 알아보자.

그 전에 로그와 메트릭의 차이를 먼저 알아볼 것이다.

메트릭은 시간이 지날수록 변화하는 데이터 즉 **cpu 사용량, RAM 용량과 같은 하드웨어적 자원의 소모량**등을 의미한다. 그와 다르게 로그는 **불규칙적으로 발생하는 이벤트에 대한 반응으로 나타나는 시스템 생성 메세지**입니다. 로그는 서로 다른 데이터 세트와 함께 제공됩니다.

로그는 예를 들어서 애플리케이션 충돌이 발생해 로그가 발생할 수 있고 나중에 해당 로그를 분석하고 이들 사이에 상관관계가 있는지 확인, 해결할 수 있습니다.

즉 그라파나는 로그를 분석하기에는 좋은 기능들이 적다. 쿼리도 키바나보다 적다.

키바나는 주로 로그 메세지 분석에 사용이되고 그라파나는 메트릭 분석에 사용이 된다.

그라파나는 시스템 관점 `cpu, 메모리, 디스크 지표`를 시각화하는데 특화되어있는 것이다.

키바나는 `Elasticsearch`에 묶여 있지만, 그라파나는 다양한 데이터베이스를 선택할 수 있고

추가로 그라파나는 알림 기능 SLACK과 같은 기능을 **무료로 사용할 수 있다 개꿀** (AlertManager)

