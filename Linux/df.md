# df

![](https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUm7Mnm8UI2ejzOv3ZszLw.png)

  
디스크 사용량 모니터링은 서버 모니터링에 있어 필수적이며 df는 **서버의 디스크 사용량, inode 공간을 확인할 수 있다.** `df -h`

디렉터리 별 사용량 확인은 du 명령을 통해 확인이 가능하다 `du -sh /*`

만약 용량 확보를 위해 파일삭제시 예상과 다르게 확보가 되지 않을 경우 lsof로 파일핸들러(사용자)를 조회해서 파일을 사용하는 프로세스를 종료해야한다.

inode 파일이나 디렉터리 메타데이터를 가지고있는 구조체로서 파일과 디렉터리의 개수라고 바도 된다. inode 정보는 `df -i` 명령어로 확인이 가능하다.

정리하면 df 명령으로 서버의 디스크 상태를 체크할 수 있으며, 파일 마운트 포인트 기준으로 조회하기 때문에 아래 어떤 디렉터리가 용량이 많은지는 du를 통해 조회해 확인할 수 이다.

파일 혹은 디렉터리를 제거 했어도 용량이 반영되지 않았다면 파일 핸들러를 조회해봐야 한다. 파일 핸들은 프로세스가 파일을 열거나 참조할 때 파일 핸들이라는 상태가 생긴다. lsof를 통해 파일 핸들을 확인할 수 있으며 제거된 파일에 파일 핸들이 있다면 해당 프로세스를 kill하면 용량 개선이 반영된다.

inode는 파일과 디렉터리에 대한 메타데이터로 파일과 디렉터리의 개수로 생각해도 된다.
