# 응용 서비스와 표현 영역

## 표현 영역과 응용 영역
> 도메인이 잘 갖춰지지 않는다면 제대로 된 소프트웨어를 만들지 못한다.

응용 영역과 표현 영역이 사용자와 도메인을 연결해주는 매개체 역할을 한다.

![](https://camo.githubusercontent.com/34206c1c47ef39f4caefcdc6f4d5b971752f3eb1d0ce6f1ff9e53e5041286855/68747470733a2f2f333535333234383434362d66696c65732e676974626f6f6b2e696f2f7e2f66696c65732f76302f622f676974626f6f6b2d6c65676163792d66696c65732f6f2f6173736574732532462d4d35484f53747876782d4a723066715a6879572532462d4d424b42484e3544334c326d4941386d6173382532462d4d424b4338454a6c4361364a623873795a5f58253246372e312e706e673f616c743d6d6564696126746f6b656e3d36663436666462632d383666312d343730622d386437642d636163376633376137376261)

- `표현 영역`은 사용자의 요청을 해석한다.
- `응용 영역`은 실제 사용자가 원하는 기능을 제공한다.

표현 영역은 응용 서비스의 실행 결과를 사용자에게 알맞은 형식으로 응답한다.  
  
사용자와의 상호작용은 표현 영역이 처리하기 때문에 응용 영역은 표현 영역에 의존하지 않는다.

## 응용 서비스의 역할
> 응용 서비스는 단순히 도메인 객체 간의 흐름을 제어한다.

### 표현 영역과 도메인 영역 연결
표현 영역의 입장에서는 응용 서비스는 도메인 영역과 표현 영역을 연결해 주는 역할을 한다. 응용 서비스가 복잡하면 도메인 로직의 일부를 구현하고 있을 가능성이 있다. 이는 코드 중복, 로직 분산 등 코드 품질에 안 좋은 영향을 줄 수 있다.

### 트랜잭션 처리
응용 서비스는 도메인의 상태 변경을 트랜잭션을 이용해 처리해야한다. 데이터 일관성을 지키기 위해 트랜잭션 범위에서 응용 서비스를 실행해야 한다.

## 도메인 로직 넣지 않기
응용 서비스는 애그리거트와 관련 리포지터리를 이용해 도메인 객체 간의 실행 흐름을 제어한다.  
  
ex) 암호 변경 기능을 응용 서비스에서 구현한다면 Member 애그리거트와 MemberRepository 등 관련 리포지터리를 이용한다.  
  
기존 암호를 올바르게 입력 했는지 확인하는 것은 핵심 도메인 로직이기 때문에 응용 서비스가 아닌 메인 애그리거트를 구현해야한다.  
  
도메인 로직이 도메인 영역과 응용 서비스에 분산되면 다음과 같은 문제가 발생한다.

- 코드 응집성 저하
도메인 데이터와 그 데이터를 조작하는 도메인 로직이 서로 다른 영역에 위치하면 도메인 로직을 파악하기 위해 **여러 영역을 분석**해야한다.

- 로직 중복 현상

여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아진다.  
  
코드 중복을 막기 위해 별도의 보조 클래스를 만들 수 있지만, 도메인 영역에 구현되어 있다면 응용 서비스는 그 기능을 사용하기만 하면 된다.
  
이와 같은 문제는 결과적으로 코드 변경을 어렵게 만든다. 소프트웨어의 중요한 경쟁 요소인 변경 용이성이 떨어진다는 것은 소프트웨어의 가치를 떨어뜨리는 것이다. 따라서 도메인 로직을 **도메인 영역에 모아 코드 중복을 줄이고 응집도를 높여 가치를 높여야한다.**