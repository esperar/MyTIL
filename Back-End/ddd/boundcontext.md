# 도메인 모델과 바운디드 컨텍스트

## 도메인 모델과 경계

> 하위 도메인마다 다른 모델을 만들어야 한다.

한 도메인은 다시 여러 하위 도메인으로 구분되기 때문에 한 개의 모델로 여러 하위 도메인을 모두 표현하려고 하면 안된다.  
  
논리적으로 같은 존재처럼 보이지만 하위 도메인에 따라 다른 용어를 사용하는 경우도 있다.

![](https://user-images.githubusercontent.com/43809168/98814430-00e36280-2469-11eb-828b-043450bc9712.png)

- 각 모델은 명시적으로 구본되는 경계를 가져서 섞이지 않도록 해야한다.
- 모델은 특정한 컨텍스트(문맥) 하에서 완전한 의미를 갖는다.
- 구분되는 경계를 갖는 컨텍스트를 DDD에서는 **바운디드 컨텍스트**라고 부른다.

## 바운디드 컨텍스트
> 바운디드 컨텍스트는 도메인 모델을 구분하는 경계다.

바운디드 컨텍스트는 모델의 경계를 결정하며 한 개의 바운디드 컨텍스트는 논리적으로 한 개의 모델을 갖는다.  
또한 실제로 사용자에게 기능을 제공하는 물리적 시스템을 도메인 모델은 바운디드 컨텍스트 안에서 도메인을 구현한다.  
바운디드 컨텍스트는 기업의 팀 조직 구조에 따라 결정되기도 한다.

![](https://user-images.githubusercontent.com/43809168/98814818-93840180-2469-11eb-9c42-8bd99bc5a0e8.png)

여러 하위 도메인을 하나의 바운디드 컨텍스트에서 개발할 때 하위 도메인의 모델이 섞이지 않도록 주의해야 한다.  
비록 한 개의 바운디드 컨텍스트가 여러 하위 도메인을 포함하더라도 하위 도메인마다 구분되는 패키지를 갖도록 구현해야한다.

![](https://user-images.githubusercontent.com/43809168/98815005-d9d96080-2469-11eb-9a9b-8086ddeca016.png)
바운디드 컨텍스트는 도메인 모델을 구분하는 경계가 되기 때문에 하위 도메인에 알맞은 모델을 포험하여 구현하게 된다.


![](https://user-images.githubusercontent.com/43809168/98815024-e2319b80-2469-11eb-88ae-8908132d059f.png)

<br>

## 바운디드 컨텍스트의 구현
> 모든 바운디드 컨텍스트를 도메인 주도로 개발할 필요는 없다.

바운디드 컨텍스트는 도메인 모델뿐만 아니라 표현 영역, 응용 서비스, 인프라스트럭처 영역을 모두 포함한다.

![](https://user-images.githubusercontent.com/42582516/159478300-47648192-ea1c-46d2-9635-a954e8b1fa9b.png)

모든 바운디드 컨텍스트를 도메인 주도로 개발할 필요는 없다.  
도메인 기능이 복잡하지 않고 단순하다면 서비스-DAO 방식의 CRUD 방식을 사용해도 문제가 되지 않는다.

![](https://user-images.githubusercontent.com/42582516/159478979-68ad9157-0a92-4f51-b218-1d615c471009.png)

한 바운디드 컨텍스트에서 두 방식을 혼합해서 사용할 수도 있따.  
대표적인 예악 CQRS(Command Query Responsibility Segregation)로 명령 기능과 조회 쿼리 기능을 위한 모델을 구분하는 패턴이다.  
다은과 같이 상태 변경과 관련된 기능은 도메인 모델 기반으로 구현하고 조회 기능은 서비스-DAO를 이용해 구현할 수 있다.  
![](https://user-images.githubusercontent.com/42582516/159479376-500e3456-298e-4b53-82d4-af3e9b8c48cb.png)

각 바운디드 컨텍스트는 서로 다른 구현 기술을 사용할 수 있으며 반드시 사용자에게 보여지는 UI를 가지고 있어야 하는 것은 아니다.  
웹 브라우저에서 REST API를 직접 호출해서 JSON 데이터를 가공할 수도 있고 UI 서버를 두고 바운디드 컨텍스트와 통신하는 방법도 있다.

