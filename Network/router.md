# 라우터 Router


라우터는 OSI 7계층중 3계층에 속한 장비로 다른 네트워크에게 패킷을 전달하기위해 경로를 설정하고 데이터를 전달하는 역할을 한다.

라우터는 패킷을 보낼 때 목적지를 찾지 못하면 패킷을 드롭한다.

라우터는 목적지까지 한 번에 데이터를 보내기에는 경로를 탐색하는 과정이 너무 힘들기 때문에 근접한 라우터를 목적지로 지정하고 그 라우터에서 다시 경로를 탐색한다. 이 것을 **홉 바이 홉** 방식이라고 한다.

라우트할 목적지를 라우터는 테이블로 관리하고 있는데 이를 라우팅 테이블이라 하고 LPM 방식을 통해서 가장 가까운 목적지를 탐색한다. (롱기스트 프리픽스 매치)

라우터는 다음과 같은 3가지 기능을 한다.

1. 경로 지정: 다양한 경로 수집 후 최적의 경로에 패킷을 보낸다.
2. 브로드캐스트 컨트롤: 들어온 패킷의 목적지 주소가 라우팅 테이블에 없으면 패킷을 버린다.
3. 프로토콜 변환: 패킷 포워딩 과정에서 2계층의 헤더 정보를 제거 후 새롭게 만든다.

### 라우터의 경로 설정

라우터는 경로를 설정하는 방법이 3가지가 존재한다.

#### 1. 다이렉트 커넥티드

ip 주소를 입력하면 자연스럽게 인접 네트워크 정보를 얻는 방법이다.

#### 2. 정적 라우팅

관리자가 직접 목적지 ip를 라우팅 테이블에 입력하는 방식이다.

### 3. 동적 라우팅

라우터 끼리 서로 경로 정보를 자동으로 교환하는 방법이다. 자신이 지금 패킷을 받을 수 있는 상태인지 아닌지에 대한 상태 교환으로 사용되기도한다.

<br>

### 브로드캐스트 컨트롤

라우터는 기본적으로 멀티캐스트로 정보를 습득하지 않고 브로드캐스트를 하지 않는다.

즉, 라우팅 테이블에 자신의 정보가 있어야만, 패킷을 보낼 수 있는 것이다.

> 바로 연결되어 있는 네트워크는 정보가 없어도 보낼 수 있다.

이러한 기능을 `브로드캐스트/멀티캐스트 컨트롤`이라고 부른다.


<br>

### 프로토콜 변환

라우터의 또 다른 역할로 서로 다른 프로토콜로 구성된 네트워크를 연결하는 것이다. 근데 이 방법은 현재 대부분 네트워크가 이더넷을 사용하면서 줄어들었다. 예시로는 LAN, WAN이 있다.

라우터에 패킷이 들어오면 2계층까지의 헤더 정보를 벗기고 3계층 주소를 확인 후 2계층 헤더 정보를 새로 만들어서 외부로 보낸다.

